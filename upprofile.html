<!DOCTYPE html>
<html>
	<head>

		<title>leoni
	
		</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
		<!--===============================================================================================-->
		<link rel="icon" type="image/png" href="images/download.png" />
		<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
		<!--===============================================================================================-->
		<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="css/util.css">
		<link rel="stylesheet" type="text/css" href="css/main.css">
		<link rel="stylesheet" type="text/css" href="css/profile.css">
		<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
	
		<script type="text/javascript">
	
			$(window).on('scroll', function () {
				if ($(window).scrollTop()) {
					$('nav').addClass('black');
				}
				else {
					$('nav').removeClass('black');
				}
			})
	
		</script>
	
	</head>
<body>

	
    
	<header>
		<div class="vanilla_container">
			<nav class="nav-container">
				<div class="logo"><a href="#"><img src="images/Picture2.png" style="width: 150px;margin-top: 10px;"></a>
				</div>
				<!--         <div class="logo-isit"><img src="img/isit_logo.png" alt="logo-isitcom"></div>
	 -->
				<div class="links">
					<ul>
						<li style="margin-top: 12px;"><a href="#">Accueil</a></li>

						<div class="dropdown">
							<button class="btn  dropdown-toggle" type="button" id="dropdownMenuButton"
								data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Services
							</button>
							<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
								<a class="dropdown-item" href="demande-de-congé.html" >Demande de congé</a>
								<a class="dropdown-item" href="demande-de-stage.html">demande de stage</a>
								<a class="dropdown-item" href="recrutement.html">Recrutrement</a>
							</div>
						</div>
						<div class="dropdown">
							<button class="btn  dropdown-toggle" type="button" id="dropdownMenuButton"
								data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Evenements
							</button>
							<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
								<a class="dropdown-item" href="participation-evenement.html">Participation
									d'évenement</a>
								<a class="dropdown-item" href="proposition-evenement.html">Proposition d'évenement</a>
							</div>
						</div>
						
						<li style="margin-top: 12px;"><a href="login.html" > connexion</a>   </li>
					</ul>
				</div>

			</nav>
			<script> 
				var c = localStorage.getItem("idAdmin");
					console.log(c);
				
					// Post a user
					var url3 = "http://127.0.0.1:3000/empls/" + c ;
					var xhr3 = new XMLHttpRequest();
					xhr3.open("GET", url3, true);
				
					xhr3.onload = function () {
						var empl = JSON.parse(xhr3.responseText);
						if (xhr3.readyState == 4 && xhr3.status == "200") {
						  document.getElementById("username").innerHTML = empl.name;
						  document.getElementById("image").src = empl.picture;
						} else {
				
							console.log("error");
						}
					}
				
					xhr3.send(null);
				 
				</script>
		</div>
	</header>
	<div class="container">
		<div class="main-body">
		
			
		
			  <div class="row gutters-sm">
				
				<div class="col-lg-10">
					<div class="card">
						<div class="card-body">
							<div class="row mb-3">
								<div class="col-sm-3">
                                    
									<h6 class="mb-0">Nom et Prenom</h6>
								</div>
								<div class="col-sm-9 text-secondary" >
									<input type="text" class="form-control" id="nam" >
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0"> Numero cin </h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="" id="cin">
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Numero Telephone</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="(216)" id="tel">
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Addrsse</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="(320) " id="addr">
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Email</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="" id="email">
								</div>
							</div>
                            <div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Sexe</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<select class="form-control" name="D1"  id="type">
                                        <option></option>
                                        <option>Homme</option>
                                        <option>Femme</option>
                                        
                                      </select>
								</div>
							</div>
                            <div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Post</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="" id="post">
								</div>
							</div>
                            <div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Mot de Passe</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="password" class="form-control" value="" id="pwd">
								</div>
							</div>
                            <div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Photo</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="" id="i" onclick="send()">
								</div>
							</div>
							<div class="row">
								<div class="col-sm-3"></div>
								<div class="col-sm-9 text-secondary">
									<input type="button" class="btn btn-primary px-4" value="Sauvegarder les modifications" onclick="update()">
								</div>
							</div>
						</div>
					</div>
			  </div>
	
			</div>
		</div>
	<footer class="site-footer">
		<div class="container">
			<div class="row">
				<div class="col-sm-12 col-md-6">
					<h5 style="color: rgb(193, 189, 189);">About</h5>
					<br>
					<h6 class="text-justify" > LEONI Tunisie est spécialisée dans la fabrication des câbles électroniques et électriques destinés au secteur automobile et plus particulièrement à la marque Mercedes.</h6>
				</div>

				<div class="col-xs-6 col-md-3">
					<h5 style="color: rgb(193, 189, 189);">Services</h5>
					<br>
					<ul class="footer-links">
						<li><a href="demande-de-congé.html"> <h6>Demande de congé</h6> </a></li>
						<li><a href="demande-de-stage.html"> <h6>Demande de stage</h6> </a></li>
						<li><a href="recrutement.html"><h6>Recrutrement</h6> </a></li>
						
					</ul>
				</div>

				<div class="col-xs-6 col-md-3">
					<h5 style="color: rgb(193, 189, 189);">Evenements</h5>
					<br>
					<ul class="footer-links">
						<li><a href="participation-evenement.html"> <h6>Participation d'evenement</h6> </a></li>
						<li><a href="proposition-evenement.html"> <h6>Proposition d'evenement </h6> </a></li>
						
					</ul>
				</div>
			</div>
			<hr>
		</div>
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-sm-6 col-xs-12">
					<p class="copyright-text">
						Zone Industrielle – Messadine 4013 Messadine M'Saken Sousse, Tunisie
					</p>
				</div>

				<div class="col-md-4 col-sm-6 col-xs-12">
					<ul class="social-icons">
						<li><a class="facebook" href="https://www.facebook.com/annuaireprotunisie"><i class="fa fa-facebook"></i></a></li>
						<li><a class="twitter" href="https://twitter.com/Tunipages1"><i class="fa fa-twitter"></i></a></li>
					
						<li><a class="linkedin" href="https://www.linkedin.com/company/leoni-tunisia/?originalSubdomain=tn"><i class="fa fa-linkedin"></i></a></li>
					</ul>
				</div>
			</div>
		</div>
	</footer>
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
	<script>
		var c = localStorage.getItem("idAdmin");
		console.log(c);
	
		// Post a user
		var url3 = "http://127.0.0.1:3000/empls/" + c ;
		var xhr3 = new XMLHttpRequest();
		xhr3.open("GET", url3, true);
	
		xhr3.onload = function () {
			var empl = JSON.parse(xhr3.responseText);
			if (xhr3.readyState == 4 && xhr3.status == "200") {
			 
			  document.getElementById("nam").innerHTML= empl.name;
			  document.getElementById("email").innerHTML = empl.email ;
			  document.getElementById("pwd").innerHTML = empl.password;
			  document.getElementById("cin").innerHTML = empl.cin;
			  document.getElementById("tel").innerHTML = empl.tel;
			  document.getElementById("addr").innerHTML = empl.addr;
			  document.getElementById("post").innerHTML = empl.post;
			  document.getElementById("i").src = empl.picture;
			} else {
	
				console.log("error");
			}
		}
	
		xhr3.send(null);
        function update(){
        var c = localStorage.getItem("idAdmin");
            
                var url = "http://127.0.0.1:3000/empls/"+c;
                                
                var data = {};
      data.name = document.getElementById("nam").value;
    data.cin = document.getElementById("cin").value;
    data.tel = document.getElementById("tel").value;
    data.addr = document.getElementById("addr").value;
    data.email = document.getElementById("email").value;
    data.sexe = document.getElementById("type").value;
    data.post = document.getElementById("post").value;
    data.password = document.getElementById("pwd").value;
    data.picture = document.getElementById("i").value;

              
                                                        
                var json = JSON.stringify(data);
                var xhr = new XMLHttpRequest();
                xhr.open("PUT", url, true);
                xhr.setRequestHeader('Content-type','application/json; charset=utf-8');
                xhr.onload = function () {
                    var empls = JSON.parse(xhr.responseText);
                    if (xhr.readyState == 4 && xhr.status == "200") {
                        alert("information est modifié");
                        location.replace("profile.html");
                    } else {
                        console.error(empls);
                        location.replace("profile.html");
                    }
                }
                xhr.send(json);
           
    }

	
		
		
	
	</script>
	<script>
	 function send() {
        var i = document.getElementById("i");
        const apikey = "ANlm5NoOQIytnuRwZng44z";
        const client = filestack.init(apikey);
        const options = {
          maxFiles: 20,
          uploadInBackground: false,
          onOpen: () => console.log("opened!"),
          onUploadDone: (res) => (i.value = res.filesUploaded[0].url),
        };
        client.picker(options).open();
		
      }
	</script>
	
</body>
</html>